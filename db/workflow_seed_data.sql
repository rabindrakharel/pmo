-- Seed data for workflow entities referenced in WFI-2024-001 and WFI-2024-002
-- These UUIDs match the entity_id values in workflow_data

-- 1. Customer (d_cust) - aaaaaaaa-0000-0000-0001-111111111111
INSERT INTO app.d_cust (
  id,
  code,
  name,
  descr,
  cust_number,
  cust_type,
  cust_status,
  primary_address,
  city,
  province,
  postal_code,
  country,
  primary_contact_name,
  primary_email,
  primary_phone,
  dl__opportunity_funnel_stage,
  dl__customer_tier,
  dl__acquisition_channel,
  created_ts,
  updated_ts
) VALUES (
  'aaaaaaaa-0000-0000-0001-111111111111',
  'CUST-WF-001',
  'John Smith',
  'Test customer for workflow WFI-2024-001',
  'CUST-WF-001',
  'residential',
  'active',
  '123 Main Street',
  'Toronto',
  'ON',
  'M5V 3A8',
  'Canada',
  'John Smith',
  'john.smith@example.com',
  '416-555-0001',
  'qualified_lead',
  'tier_1',
  'website',
  now(),
  now()
);

-- 2. Quote (fact_quote) - bbbbbbbb-0000-0000-0001-111111111111
INSERT INTO app.fact_quote (
  id,
  code,
  name,
  descr,
  dl__quote_stage,
  quote_items,
  subtotal_amt,
  tax_pct,
  quote_tax_amt,
  quote_total_amt,
  valid_until_date,
  sent_date,
  customer_name,
  customer_email,
  customer_phone,
  internal_notes,
  created_ts,
  updated_ts
) VALUES (
  'bbbbbbbb-0000-0000-0001-111111111111',
  'QUOTE-WF-001',
  'HVAC Installation Quote for John Smith',
  'Quote for HVAC installation at 123 Main Street',
  'sent',
  '[{"item": "HVAC System", "quantity": 1, "unit_price": 5000.00}]'::jsonb,
  5000.00,
  13.00,
  650.00,
  5650.00,
  (CURRENT_DATE + INTERVAL '30 days')::date,
  CURRENT_DATE,
  'John Smith',
  'john.smith@example.com',
  '416-555-0001',
  'Standard HVAC installation quote',
  now(),
  now()
);

-- 3. Work Order (fact_work_order) - cccccccc-0000-0000-0001-111111111111
INSERT INTO app.fact_work_order (
  id,
  code,
  name,
  descr,
  dl__work_order_status,
  scheduled_date,
  scheduled_start_time,
  scheduled_end_time,
  customer_name,
  customer_email,
  customer_phone,
  service_address_line1,
  service_city,
  service_province,
  service_postal_code,
  labor_hours,
  labor_cost_amt,
  materials_cost_amt,
  total_cost_amt,
  internal_notes,
  created_ts,
  updated_ts
) VALUES (
  'cccccccc-0000-0000-0001-111111111111',
  'WO-WF-001',
  'HVAC Installation - John Smith',
  'Work order for HVAC installation following quote QUOTE-WF-001',
  'scheduled',
  (CURRENT_DATE + INTERVAL '7 days')::date,
  '09:00:00'::time,
  '17:00:00'::time,
  'John Smith',
  'john.smith@example.com',
  '416-555-0001',
  '123 Main Street',
  'Toronto',
  'Ontario',
  'M5V 3A8',
  8.0,
  800.00,
  4200.00,
  5000.00,
  'Standard HVAC installation work order',
  now(),
  now()
);

-- 4. Task (d_task) - a2222222-2222-2222-2222-222222222222
INSERT INTO app.d_task (
  id,
  code,
  name,
  descr,
  dl__task_stage,
  dl__task_priority,
  estimated_hours,
  story_points,
  created_ts,
  updated_ts
) VALUES (
  'a2222222-2222-2222-2222-222222222222',
  'TASK-WF-001',
  'Follow-up: HVAC Maintenance Schedule',
  'Schedule first maintenance visit for newly installed HVAC system',
  'in_progress',
  'medium',
  2.0,
  3,
  now(),
  now()
);

-- 5. Invoice (f_invoice) - dddddddd-0000-0000-0001-111111111111
INSERT INTO app.f_invoice (
  id,
  invoice_number,
  invoice_date,
  invoice_datetime,
  due_date,
  payment_terms,
  client_id,
  client_name,
  client_type,
  product_name,
  line_item_type,
  qty_billed,
  unit_of_measure,
  unit_price_cad,
  discount_percent,
  discount_amount_cad,
  extended_price_cad,
  tax_rate,
  tax_amount_cad,
  hst_amount_cad,
  line_subtotal_cad,
  line_total_cad,
  invoice_status,
  payment_status,
  sent_date,
  amount_outstanding_cad,
  billing_address_line1,
  billing_city,
  billing_province,
  billing_postal_code,
  billing_country,
  notes,
  created_at,
  updated_at
) VALUES (
  'dddddddd-0000-0000-0001-111111111111',
  'INV-WF-001',
  CURRENT_DATE,
  now(),
  (CURRENT_DATE + INTERVAL '30 days')::date,
  'net_30',
  'aaaaaaaa-0000-0000-0001-111111111111',
  'John Smith',
  'residential',
  'HVAC Installation Service',
  'service',
  1.0,
  'each',
  5000.00,
  0.00,
  0.00,
  5000.00,
  13.00,
  650.00,
  650.00,
  5000.00,
  5650.00,
  'sent',
  'unpaid',
  CURRENT_DATE,
  5650.00,
  '123 Main Street',
  'Toronto',
  'ON',
  'M5V3A8',
  'CA',
  'Invoice for completed HVAC installation',
  now(),
  now()
);

-- Additional customer for WFI-2024-002 (if needed)
INSERT INTO app.d_cust (
  id,
  code,
  name,
  descr,
  cust_number,
  cust_type,
  cust_status,
  primary_address,
  city,
  province,
  postal_code,
  country,
  primary_contact_name,
  primary_email,
  primary_phone,
  dl__opportunity_funnel_stage,
  dl__customer_tier,
  dl__acquisition_channel,
  created_ts,
  updated_ts
) VALUES (
  'aaaaaaaa-0000-0000-0002-222222222222',
  'CUST-WF-002',
  'Sarah Johnson',
  'Test customer for workflow WFI-2024-002',
  'CUST-WF-002',
  'residential',
  'active',
  '456 Oak Avenue',
  'Mississauga',
  'ON',
  'L5B 3Y8',
  'Canada',
  'Sarah Johnson',
  'sarah.johnson@example.com',
  '905-555-0002',
  'new_lead',
  'tier_2',
  'referral',
  now(),
  now()
)
ON CONFLICT (id) DO NOTHING;

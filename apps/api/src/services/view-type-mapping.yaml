# ============================================================================
# VIEW TYPE MAPPING
# ============================================================================
# Maps fieldBusinessType to component-specific VIEW/DISPLAY rendering
# Version: 4.0.0
#
# ============================================================================
# PURPOSE & POSITION IN MAPPING CHAIN
# ============================================================================
#
# This file is STEP 2a in the field metadata pipeline:
#
#   Column Name (e.g., "budget_allocated_amt")
#         │
#         ▼
#   pattern-mapping.yaml
#   (column pattern → fieldBusinessType)
#         │
#         ▼
#   fieldBusinessType (e.g., "currency")
#         │
#         ├──────────────────────────────────────────┐
#         ▼                                          ▼
#   ┌─────────────────────────────────────┐   ┌─────────────────────────────┐
#   │  VIEW-TYPE-MAPPING.YAML (this file) │   │  edit-type-mapping.yaml     │
#   │  ─────────────────────────────────  │   │  ─────────────────────────  │
#   │  Defines how to DISPLAY the field   │   │  Defines how to EDIT field  │
#   │  (read-only rendering)              │   │  (input controls)           │
#   │                                     │   │                             │
#   │  Output: renderType, component,     │   │  Output: inputType,         │
#   │          behavior, style            │   │          behavior, style,   │
#   │                                     │   │          validation         │
#   └─────────────────────────────────────┘   └─────────────────────────────┘
#
# ============================================================================
# RENDERTYPE RULES (CRITICAL!)
# ============================================================================
#
# renderType determines HOW a field is rendered:
#
#   NATIVE TYPES (inline rendering, NO component field!):
#   ─────────────────────────────────────────────────────
#   - text         : Plain text display
#   - number       : Numeric display (with optional unit, precision)
#   - currency     : Currency display (with symbol, decimals, locale)
#   - percentage   : Percentage display (with decimals)
#   - date         : Date display (with format, locale)
#   - timestamp    : DateTime display (with format)
#   - time         : Time display
#   - duration     : Duration display (with unit: minutes, hours, seconds, ms)
#   - boolean      : Yes/No, True/False, Active/Inactive display
#   - filesize     : Human-readable file size (KB, MB, GB)
#   - badge        : Colored status/datalabel badge (with colorFromData)
#   - entityLink   : Single entity reference link (with displayField, linkToEntity)
#   - entityLinks  : Multiple entity reference links (with maxDisplay)
#   - tags         : Tag/chip display (with maxDisplay)
#   - file         : File link/preview
#   - image        : Image thumbnail
#   - avatar       : Avatar image (circular)
#   - color        : Color swatch (with showHex)
#   - icon         : Icon display
#   - json         : JSON preview (with collapsed)
#
#   All rendering is done INLINE by formatDataset() - no separate cell components.
#
# EXAMPLES:
#
#   CORRECT (Native type - no component):
#     entityDataTable:
#       renderType: currency
#       style: { symbol: "$", decimals: 2 }
#
#   CORRECT (Badge for datalabel):
#     entityDataTable:
#       renderType: badge
#       style: { colorFromData: true }
#
#   CORRECT (Entity link):
#     entityDataTable:
#       renderType: entityLink
#       style: { displayField: name, linkToEntity: true }
#
# ============================================================================
# API OUTPUT STRUCTURE (v10.0.0)
# ============================================================================
#
# The API returns metadata with viewType and editType as top-level containers
# within each component. This separates VIEW and EDIT concerns cleanly:
#
#   {
#     "data": [...],
#     "metadata": {
#       "entityDataTable": {
#         "viewType": {                          ← All VIEW metadata here
#           "budget_allocated_amt": {
#             "dtype": "float",
#             "label": "Budget Allocated",
#             "type": "currency",                ← renderType from this file
#             "behavior": { "visible": true, "sortable": true },
#             "style": { "symbol": "$", "decimals": 2 }
#           }
#         },
#         "editType": {                          ← All EDIT metadata here
#           "budget_allocated_amt": {
#             "dtype": "float",
#             "label": "Budget Allocated",
#             "type": "number",                  ← inputType from edit-type-mapping.yaml
#             "behavior": { "editable": true },
#             "style": {},
#             "validation": { "min": 0 }
#           }
#         }
#       }
#     }
#   }
#
# ============================================================================
# THREE CATEGORIES (Quick Reference)
# ============================================================================
#
#   behavior:   Interaction settings (visible, sortable, filterable, searchable)
#   style:      Visual presentation AND formatting (width, align, symbol, decimals, ...)
#   validation: Input constraints (edit-type-mapping.yaml only)
#
# ============================================================================
# HOW THIS FILE IS COMPOSED
# ============================================================================
#
# Each fieldBusinessType entry has:
#
#   fieldBusinessType:
#     dtype: <data_type>           # REQUIRED - Database/JS data type (ONLY root-level field)
#     inherit: <other_type>        # Optional - Inherit from another type
#
#     # Component-specific definitions (REQUIRED for each supported component):
#     entityDataTable:
#       behavior: { visible, sortable, filterable, searchable }
#       style: { width, align, symbol, decimals, locale, ... }
#
#     entityFormContainer:
#       behavior: { visible, editable }
#       style: { size, showBar, monospace, ... }
#
#     kanbanView:
#       behavior: { visible }
#       style: { truncate, compact, ... }
#
#     gridView:
#       behavior: { visible }
#       style: { ... }
#
#     calendarView:
#       behavior: { visible }
#       style: { ... }
#
#     dagView:
#       behavior: { visible }
#       style: { ... }
#
# ============================================================================
# CRITICAL RULE: Root-level vs Component-level Fields
# ============================================================================
#
# !! IMPORTANT !! Only dtype and inherit belong at root level!
#
# CORRECT:
#   duration:
#     dtype: int
#     entityDataTable: { <<: *table_default, style: { width: "100px", unit: minutes } }
#     entityFormContainer: { <<: *form_default, style: { unit: minutes } }
#
# WRONG:
#   duration:
#     dtype: int
#     renderType: duration       # <-- ERROR! Not root-level
#     width: "100px"             # <-- ERROR! Not root-level
#     entityDataTable: { ... }
#
# All display/behavior fields are page-specific and belong INSIDE
# each component section (entityDataTable, entityFormContainer, etc.)
#
# ============================================================================
# ROOT-LEVEL FIELDS (only these!)
# ============================================================================
#
# dtype (REQUIRED) - Data type:
#   - str, int, float, bool, uuid, date, timestamp, jsonb
#   - array[str], array[uuid]
#
# inherit - Copy all settings from another fieldBusinessType (optional)
#
# ============================================================================
# COMPONENT-LEVEL FIELDS (organized into behavior, style)
# ============================================================================
#
# BEHAVIOR - Interaction/visibility settings:
#   visible     - Whether field is shown (default: true for tables, varies for others)
#   sortable    - Whether column can be sorted (tables only)
#   filterable  - Whether field appears in filters (tables only)
#   searchable  - Whether field is included in text search
#   required    - Show required indicator (*) in display mode (default: false)
#
# STYLE - Visual presentation AND formatting:
#   width       - Column width: "auto", "80px", "120px", "200px", etc.
#   align       - Text alignment: left (default), center, right
#   symbol      - Currency symbol: "$", "€", etc.
#   decimals    - Number of decimal places: 0, 2, etc.
#   locale      - Locale for formatting: "en-CA", "fr-CA", etc.
#   truncate    - Max characters before truncation: 50, 80, etc.
#   monospace   - Use monospace font: true/false
#   bold        - Bold text: true/false
#   linkable    - Clickable link: true/false
#   linkToDetail- Link to entity detail page: true/false
#   colorFromData - Badge color from datalabel: true/false
#   showFlag    - Show country flag: true/false
#   compact     - Compact display mode: true/false
#   unit        - Unit for measurements: "minutes", "hours", "kg", etc.
#   emptyValue  - Display when value is null/empty: "—", "N/A", "(none)", etc.
#   helpText    - Tooltip text shown on hover (contextual guidance)
#
# NOTE: validation rules are in edit-type-mapping.yaml only (for input controls)
#
# ============================================================================
# COMPONENT ARCHITECTURE: PAGE-LEVEL CONTAINERS + INLINE RENDERING
# ============================================================================
#
# This system uses PAGE-LEVEL containers with INLINE rendering (no separate
# field-level components):
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │  PAGE-LEVEL COMPONENTS (Containers)                                      │
# │  ═══════════════════════════════════                                     │
# │  These are the KEYS in this YAML file. They define WHERE fields render.  │
# │  They are React container components that orchestrate multiple fields.   │
# │                                                                          │
# │  Actual files:                                                           │
# │    - EntityDataTable.tsx      (tables)                                   │
# │    - EntityFormContainer.tsx  (detail/form views)                        │
# │    - KanbanView.tsx           (kanban boards)                            │
# │    - CalendarView.tsx         (calendar events)                          │
# │    - DAGVisualizer.tsx        (workflow DAG)                             │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │  INLINE RENDERING (No separate field components)                         │
# │  ═══════════════════════════════════════════════                         │
# │  Field rendering happens INLINE within page-level containers using:      │
# │    - formatDataset() for view mode (returns display strings + styles)    │
# │    - renderEditModeFromMetadata() for edit mode (returns input elements) │
# │                                                                          │
# │  The `component` key in this YAML is a descriptive hint only.            │
# │  Actual rendering is based on renderType, inputType, and style options.  │
# └─────────────────────────────────────────────────────────────────────────┘
#
# Example - how datalabel fields are rendered:
#
#   datalabel:
#     dtype: str
#     entityDataTable:       ←── PAGE-LEVEL (container for table columns)
#       style: { colorFromData: true }   ←── Inline badge rendering
#     entityFormContainer:   ←── PAGE-LEVEL (container for detail view)
#       viz_container: DAGVisualizer     ←── Triggers DAGVisualizer component
#     dagView:               ←── PAGE-LEVEL (container for workflow DAG)
#       behavior: { visible: true }      ←── Node rendered inline by DAGVisualizer
#
# ============================================================================
# PAGE-LEVEL COMPONENTS (6 containers)
# ============================================================================
#
# These are the section KEYS under each fieldBusinessType:
#
# ┌────────────────────┬────────────────────────────────────────────────────┐
# │ Component Key      │ Description                                        │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ entityDataTable    │ Main entity list table (EntityDataTable.tsx)       │
# │                    │ Renders sortable/filterable columns with data      │
# │                    │ Used on: EntityListOfInstancesPage                 │
# │                    │ Layout: Tabular rows and columns                   │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ entityFormContainer│ Entity detail/form view (EntityFormContainer.tsx)  │
# │                    │ Renders Notion-style property list                 │
# │                    │ Used on: EntitySpecificInstancePage                │
# │                    │ Layout: Vertical key-value pairs                   │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ kanbanView         │ Kanban board cards (KanbanView.tsx)                │
# │                    │ Renders fields on draggable cards                  │
# │                    │ Used on: EntityListOfInstancesPage (kanban mode)   │
# │                    │ Layout: Cards grouped by status column             │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ gridView           │ Card grid view (GridView.tsx)                      │
# │                    │ Renders fields on grid cards                       │
# │                    │ Used on: EntityListOfInstancesPage (grid mode)     │
# │                    │ Layout: Responsive card grid                       │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ calendarView       │ Calendar event display (CalendarView.tsx)          │
# │                    │ Renders fields in calendar events                  │
# │                    │ Used on: EntityListOfInstancesPage (calendar mode) │
# │                    │ Layout: Monthly/weekly calendar with events        │
# ├────────────────────┼────────────────────────────────────────────────────┤
# │ dagView            │ DAG workflow visualizer (DAGVisualizer.tsx)        │
# │                    │ Renders fields as nodes in directed acyclic graph  │
# │                    │ Used on: Workflow pages, datalabel hierarchies     │
# │                    │ Layout: Connected nodes showing progression        │
# └────────────────────┴────────────────────────────────────────────────────┘
#
# ============================================================================
# ACTUAL RENDERING ARCHITECTURE (v8.0.0)
# ============================================================================
#
# IMPORTANT: This project does NOT use separate cell/field components.
# Rendering is done INLINE within page-level containers using formatters.
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ VIEW MODE RENDERING (format-at-read pattern)                            │
# ├─────────────────────────────────────────────────────────────────────────┤
# │                                                                          │
# │ 1. API returns raw data + metadata (renderType, inputType, style)       │
# │ 2. React Query's `select` calls formatDataset()                         │
# │ 3. Returns FormattedRow with:                                           │
# │    - display[key]: Pre-formatted string ("$50,000.00")                  │
# │    - styles[key]: Tailwind classes ("bg-green-100 text-green-700")      │
# │ 4. Page containers render inline using display/styles                   │
# │                                                                          │
# │ Source: apps/web/src/lib/formatters/datasetFormatter.ts                 │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ EDIT MODE RENDERING (renderEditModeFromMetadata)                        │
# ├─────────────────────────────────────────────────────────────────────────┤
# │                                                                          │
# │ Uses inputType from metadata to render appropriate input:               │
# │                                                                          │
# │   inputType       → Renders                                             │
# │   ─────────────────────────────────────────────────────                 │
# │   text            → DebouncedInput (type="text")                        │
# │   number          → DebouncedInput (type="number")                      │
# │   currency        → DebouncedInput (type="number" step="0.01")          │
# │   textarea        → DebouncedTextarea                                   │
# │   date            → <input type="date">                                 │
# │   datetime        → <input type="datetime-local">                       │
# │   checkbox        → <input type="checkbox">                             │
# │   select          → ColoredDropdown (with datalabel colors)             │
# │   multiselect     → MultiSelect                                         │
# │                                                                          │
# │ Source: apps/web/src/lib/frontEndFormatterService.tsx                   │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ ACTUAL SHARED UI COMPONENTS (apps/web/src/components/shared/ui/)        │
# ├─────────────────────────────────────────────────────────────────────────┤
# │                                                                          │
# │ INPUT COMPONENTS                                                         │
# │   DebouncedInput      - Text/number input with debounce                 │
# │   DebouncedTextarea   - Textarea with debounce                          │
# │   ColoredDropdown     - Select with colored options (datalabels)        │
# │   Select              - Basic select dropdown                           │
# │   MultiSelect         - Multi-select dropdown                           │
# │   DataLabelSelect     - Datalabel-specific select                       │
# │   EntitySelect        - Entity reference select                          │
# │   EditableTags        - Tag input/editing                                │
# │                                                                          │
# │ DISPLAY COMPONENTS                                                       │
# │   KanbanView          - Kanban board (page-level)                       │
# │   CalendarView        - Calendar display (page-level)                   │
# │   TreeView            - Hierarchical tree display                       │
# │   DateRangeVisualizer - Date range bar visualization                    │
# │                                                                          │
# │ WORKFLOW                                                                 │
# │   DAGVisualizer       - DAG workflow visualization (page-level)         │
# │                         Source: apps/web/src/components/workflow/       │
# │                                                                          │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ SPECIAL VISUALIZATION CONTAINERS (EntityFormContainer_viz_container)    │
# ├─────────────────────────────────────────────────────────────────────────┤
# │                                                                          │
# │ For datalabel fields with DAG structure, EntityFormContainer checks:    │
# │   if (field.EntityFormContainer_viz_container === 'DAGVisualizer')      │
# │                                                                          │
# │ Valid values:                                                            │
# │   DAGVisualizer       - Renders DAG workflow for datalabel stages       │
# │   MetadataTable       - Renders key-value metadata table                │
# │   ProgressBar         - Renders progress bar visualization              │
# │   DateRangeVisualizer - Renders date range bar                          │
# │                                                                          │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ============================================================================
# YAML ANCHORS & ALIASES
# ============================================================================
#
# This file uses YAML anchors (&) and aliases (*) to reduce duplication:
#
#   &table_default    - Default settings for table columns
#   &form_default     - Default settings for form fields
#   &hidden           - Hidden field settings
#
# Usage:
#   entityDataTable: { <<: *table_default, style: { width: "200px" } }
#   entityFormContainer: { <<: *hidden }
#
# ============================================================================
# NOTE ON COMPONENT FIELD
# ============================================================================
#
# The `component` field in this YAML is a DESCRIPTIVE HINT, not an actual React
# component name. The frontend does NOT use this field for rendering.
#
# Actual rendering is determined by:
#   - View mode: renderType + style options → formatDataset() inline rendering
#   - Edit mode: inputType + style options → renderEditModeFromMetadata()
#
# The component field is included in API metadata for documentation purposes
# and potential future use, but current rendering is fully inline.
#
# ============================================================================
# EXAMPLES
# ============================================================================
#
# Simple text field:
#   name:
#     dtype: str
#     entityDataTable: { <<: *table_default, style: { width: "250px" } }
#     entityFormContainer: { <<: *form_default }
#
# Currency field:
#   currency:
#     dtype: float
#     entityDataTable: { <<: *table_default, style: { align: right, symbol: "$", decimals: 2 } }
#     entityFormContainer: { <<: *form_default }
#
# Datalabel with DAG visualization:
#   datalabel:
#     dtype: str
#     entityDataTable: { <<: *table_default, style: { colorFromData: true } }
#     entityFormContainer: { <<: *form_default, viz_container: DAGVisualizer }
#
# Inherited type:
#   title:
#     dtype: str
#     inherit: name
#
# ============================================================================
# Uses YAML anchors (&) and aliases (*) to reduce duplication

# ============================================================================
# COMPONENT DEFAULTS (inherited unless overridden)
# ============================================================================
defaults:
  # entityDataTable defaults
  table: &table_default
    visible: true
    sortable: true
    filterable: true
    searchable: false
    width: auto
    align: left

  # entityFormContainer defaults
  form: &form_default
    visible: true
    editable: true

  # kanbanView defaults
  kanban: &kanban_default
    visible: false

  # gridView defaults
  grid: &grid_default
    visible: false

  # calendarView defaults
  calendar: &calendar_default
    visible: false

  # dagView defaults
  dag: &dag_default
    visible: false

  # Hidden field (for all views)
  hidden: &hidden
    visible: false
    sortable: false
    filterable: false
    searchable: false

# ============================================================================
# FIELD BUSINESS TYPE DEFINITIONS
# ============================================================================
fieldBusinessTypes:

  # --------------------------------------------------------------------------
  # IDENTITY & CORE
  # --------------------------------------------------------------------------
  uuid:
    dtype: uuid
    entityDataTable:
      renderType: text
      behavior: { visible: false, sortable: false, filterable: false }
    entityFormContainer:
      renderType: text
      behavior: { visible: true }
      style: { monospace: true, truncate: 8 }
    kanbanView:
      renderType: text
      behavior: { visible: false }
    gridView:
      renderType: text
      behavior: { visible: false }

  code:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px", monospace: true, emptyValue: "—" }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { monospace: true, emptyValue: "—", helpText: "Unique identifier code (e.g., PROJ-001)" }
    kanbanView:
      renderType: text
      behavior: { visible: true }
      style: { monospace: true }
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { monospace: true }

  name:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      behavior: { visible: true, sortable: true, filterable: true, searchable: true, required: true }
      style: { width: "250px", bold: true, linkToDetail: true, emptyValue: "(untitled)" }
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { required: true }
      style: { size: lg, emptyValue: "(untitled)", helpText: "The display name for this record" }
    kanbanView:
      renderType: text
      behavior: { visible: true, required: true }
      style: { truncate: 50, emptyValue: "(untitled)" }
    gridView:
      renderType: text
      behavior: { visible: true }
    calendarView:
      renderType: text
      behavior: { visible: true }

  title:
    dtype: str
    inherit: name

  subject:
    dtype: str
    inherit: name

  description:
    dtype: str
    entityDataTable:
      <<: *hidden
      renderType: text
      style: { truncate: 100 }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { multiline: true }
    kanbanView:
      renderType: text
      behavior: { visible: true }
      style: { truncate: 80 }
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { truncate: 80 }

  summary:
    dtype: str
    inherit: description

  # --------------------------------------------------------------------------
  # CONTACT FIELDS
  # --------------------------------------------------------------------------
  email:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "200px", linkable: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { linkable: true }
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { linkable: true }

  phone:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px", linkable: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { countryCode: CA }
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { linkable: true }

  url:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "200px", truncate: true, linkable: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { linkable: true }
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { linkable: true }

  # --------------------------------------------------------------------------
  # ADDRESS FIELDS
  # --------------------------------------------------------------------------
  address:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "250px", singleLine: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { multiline: true }
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }

  # address_line, street, city, state, province → consolidated to 'text' type
  # See pattern-mapping.yaml for patterns that map to 'text'

  country:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "120px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }

  postal_code:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "100px", monospace: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { country: CA }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # CURRENCY FIELDS
  # --------------------------------------------------------------------------
  currency:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: currency
      style: { align: right, width: "140px", symbol: "$", decimals: 2, locale: en-CA, emptyValue: "$0.00" }
    entityFormContainer:
      <<: *form_default
      renderType: currency
      style: { symbol: "$", decimals: 2, emptyValue: "$0.00", helpText: "Amount in Canadian dollars" }
    kanbanView:
      renderType: currency
      behavior: { visible: true }
      style: { compact: true, emptyValue: "$0" }
    gridView:
      renderType: currency
      behavior: { visible: true }

  currency_cents:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: currency
      style: { align: right, width: "120px", symbol: "$", locale: en-CA, cents: true }
    entityFormContainer:
      <<: *form_default
      renderType: currency
      style: { cents: true }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # PERCENTAGE FIELDS
  # --------------------------------------------------------------------------
  percentage:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: percentage
      style: { align: right, width: "100px", decimals: 0 }
    entityFormContainer:
      <<: *form_default
      renderType: percentage
      style: { showBar: true }
    kanbanView:
      renderType: percentage
      behavior: { visible: true }
    gridView:
      renderType: percentage
      behavior: { visible: true }

  # --------------------------------------------------------------------------
  # DATE & TIME FIELDS
  # --------------------------------------------------------------------------
  date:
    dtype: date
    entityDataTable:
      <<: *table_default
      renderType: date
      style: { width: "120px", format: short, locale: en-CA }
    entityFormContainer:
      <<: *form_default
      renderType: date
      style: { format: medium }
    kanbanView:
      renderType: date
      behavior: { visible: true }
    gridView:
      renderType: date
      behavior: { visible: true }
    calendarView:
      renderType: date
      behavior: { visible: true }

  timestamp:
    dtype: timestamp
    entityDataTable:
      <<: *table_default
      renderType: timestamp
      style: { width: "160px", format: datetime }
    entityFormContainer:
      <<: *form_default
      renderType: timestamp
    kanbanView: *hidden
    gridView: *hidden
    calendarView:
      renderType: timestamp
      behavior: { visible: true }

  timestamp_readonly:
    dtype: timestamp
    entityDataTable:
      <<: *table_default
      renderType: timestamp
      behavior: { visible: true, sortable: true, filterable: false }
      style: { width: "140px", format: relative }
    entityFormContainer:
      <<: *form_default
      renderType: timestamp
      style: { showAbsolute: true, format: relative }
    kanbanView:
      renderType: timestamp
      behavior: { visible: true }
      style: { format: relative }
    gridView:
      renderType: timestamp
      behavior: { visible: true }
      style: { format: relative }

  time:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: time
      style: { width: "100px" }
    entityFormContainer:
      <<: *form_default
      renderType: time
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # DURATION FIELDS
  # --------------------------------------------------------------------------
  duration:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: duration
      style: { width: "100px", unit: minutes }
    entityFormContainer:
      <<: *form_default
      renderType: duration
      style: { unit: minutes }
    kanbanView:
      renderType: duration
      behavior: { visible: true }
    gridView:
      renderType: duration
      behavior: { visible: true }
    calendarView:
      renderType: duration
      behavior: { visible: true }

  duration_minutes:
    dtype: int
    inherit: duration

  duration_hours:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: duration
      style: { width: "100px", unit: hours }
    entityFormContainer:
      <<: *form_default
      renderType: duration
      style: { unit: hours }
    kanbanView: *hidden
    gridView: *hidden

  duration_seconds:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: duration
      style: { width: "100px", unit: seconds }
    entityFormContainer:
      <<: *form_default
      renderType: duration
      style: { unit: seconds }
    kanbanView: *hidden
    gridView: *hidden

  duration_ms:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: duration
      style: { width: "100px", unit: ms }
    entityFormContainer:
      <<: *form_default
      renderType: duration
      style: { unit: ms }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # BOOLEAN FIELDS
  # --------------------------------------------------------------------------
  boolean:
    dtype: bool
    entityDataTable:
      <<: *table_default
      renderType: boolean
      style: { align: center, width: "80px", trueLabel: "Yes", falseLabel: "No", trueColor: green, falseColor: gray }
    entityFormContainer:
      <<: *form_default
      renderType: boolean
    kanbanView:
      renderType: boolean
      behavior: { visible: true }
    gridView:
      renderType: boolean
      behavior: { visible: true }

  status_flag:
    dtype: bool
    entityDataTable:
      <<: *table_default
      renderType: boolean
      style: { align: center, width: "100px", trueLabel: Active, falseLabel: Inactive, trueColor: green, falseColor: red }
    entityFormContainer:
      <<: *form_default
      renderType: boolean
      style: { trueLabel: Active, falseLabel: Inactive }
    kanbanView:
      renderType: boolean
      behavior: { visible: true }
      style: { trueColor: green, falseColor: red }
    gridView:
      renderType: boolean
      behavior: { visible: true }
      style: { trueColor: green, falseColor: red }

  # --------------------------------------------------------------------------
  # DATALABEL & ENTITY REFERENCE FIELDS
  # --------------------------------------------------------------------------
  datalabel:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: badge
      style: { width: "140px", colorFromData: true }
    entityFormContainer:
      <<: *form_default
      renderType: badge
      style: { showHierarchy: false }
    kanbanView:
      renderType: badge
      behavior: { visible: true }
    gridView:
      renderType: badge
      behavior: { visible: true }
    calendarView:
      renderType: badge
      behavior: { visible: true }
    dagView:
      renderType: badge
      behavior: { visible: true }

  # DAG datalabels - hierarchical stage/state/status with parent-child relations
  # Matched by: dl__*_stage, dl__*_state, dl__*_status
  # Uses DAGVisualizer component for entityFormContainer view
  datalabel_dag:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: badge
      style: { width: "140px", colorFromData: true }
    entityFormContainer:
      <<: *form_default
      renderType: component
      component: DAGVisualizer
      style: { showHierarchy: true, interactive: false }
    kanbanView:
      renderType: badge
      behavior: { visible: true }
    gridView:
      renderType: badge
      behavior: { visible: true }
    calendarView:
      renderType: badge
      behavior: { visible: true }
    dagView:
      renderType: badge
      behavior: { visible: true }

  entityInstance_Id:
    dtype: uuid
    entityDataTable:
      <<: *table_default
      renderType: entityLink
      style: { width: "150px", displayField: name, linkToEntity: true }
    entityFormContainer:
      <<: *form_default
      renderType: entityLink
      style: { displayField: name }
    kanbanView:
      renderType: entityLink
      behavior: { visible: true }
    gridView:
      renderType: entityLink
      behavior: { visible: true }

  entityInstance_Ids:
    dtype: array[uuid]
    entityDataTable:
      <<: *hidden
      renderType: entityLinks
      style: { maxDisplay: 3 }
    entityFormContainer:
      <<: *form_default
      renderType: entityLinks
      style: { displayField: name }
    kanbanView:
      renderType: entityLinks
      behavior: { visible: true }
      style: { max: 3 }
    gridView:
      renderType: entityLinks
      behavior: { visible: true }

  # --------------------------------------------------------------------------
  # QUANTITY & NUMBER FIELDS
  # --------------------------------------------------------------------------
  quantity:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { width: "100px", align: right }
    entityFormContainer:
      <<: *form_default
      renderType: number
    kanbanView: *hidden
    gridView:
      renderType: number
      behavior: { visible: true }

  count:
    dtype: int
    inherit: quantity

  number:
    dtype: int
    inherit: quantity

  sort_order:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { width: "80px", align: center }
    entityFormContainer:
      <<: *form_default
      renderType: number
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # MEASUREMENT FIELDS
  # --------------------------------------------------------------------------
  area_sqft:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { align: right, width: "120px", unit: "sq ft" }
    entityFormContainer:
      <<: *form_default
      renderType: number
      style: { unit: "sq ft" }
    kanbanView: *hidden
    gridView: *hidden

  volume_m3:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { align: right, width: "120px", unit: "m³" }
    entityFormContainer:
      <<: *form_default
      renderType: number
      style: { unit: "m³" }
    kanbanView: *hidden
    gridView: *hidden

  dimension_cm:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "120px", unit: "cm" }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { unit: "cm" }
    kanbanView: *hidden
    gridView: *hidden

  weight_kg:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { align: right, width: "100px", unit: kg }
    entityFormContainer:
      <<: *form_default
      renderType: number
      style: { unit: kg }
    kanbanView: *hidden
    gridView: *hidden

  file_size:
    dtype: int
    entityDataTable:
      <<: *table_default
      renderType: filesize
      style: { width: "100px", align: right }
    entityFormContainer:
      <<: *form_default
      renderType: filesize
    kanbanView: *hidden
    gridView: *hidden

  capacity:
    dtype: int
    inherit: quantity

  # --------------------------------------------------------------------------
  # RATING & SCORE FIELDS
  # --------------------------------------------------------------------------
  rating:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { width: "120px", max: 5, suffix: "/5" }
    entityFormContainer:
      <<: *form_default
      renderType: number
      style: { max: 5, suffix: "/5" }
    kanbanView:
      renderType: number
      behavior: { visible: true }
    gridView:
      renderType: number
      behavior: { visible: true }

  score:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { width: "100px", align: right }
    entityFormContainer:
      <<: *form_default
      renderType: number
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # COORDINATES & GEOLOCATION
  # --------------------------------------------------------------------------
  latitude:
    dtype: float
    entityDataTable:
      <<: *table_default
      renderType: number
      style: { width: "120px", precision: 6 }
    entityFormContainer:
      <<: *form_default
      renderType: number
      style: { precision: 6 }
    kanbanView: *hidden
    gridView: *hidden

  longitude:
    dtype: float
    inherit: latitude

  geolocation:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { showMap: true }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # TEXT CONTENT FIELDS
  # --------------------------------------------------------------------------
  # notes, instructions → consolidated to 'text_long' type
  # See pattern-mapping.yaml for patterns that map to 'text_long'

  text_long:
    dtype: str
    entityDataTable:
      <<: *hidden
      renderType: text
      style: { truncate: 100 }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { rows: 4, multiline: true }
    kanbanView: *hidden
    gridView: *hidden

  rich_text:
    dtype: str
    entityDataTable:
      <<: *hidden
      renderType: text
      style: { truncate: 100 }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { multiline: true }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # JSON & STRUCTURED DATA
  # --------------------------------------------------------------------------
  json:
    dtype: jsonb
    entityDataTable:
      <<: *hidden
      renderType: json
      style: { collapsed: true }
    entityFormContainer:
      <<: *form_default
      renderType: json
      style: { collapsed: true }
    kanbanView: *hidden
    gridView: *hidden

  json_schema:
    dtype: jsonb
    inherit: json

  tags:
    dtype: array[str]
    entityDataTable:
      <<: *hidden
      renderType: tags
      style: { maxDisplay: 3 }
    entityFormContainer:
      <<: *form_default
      renderType: tags
    kanbanView:
      renderType: tags
      behavior: { visible: true }
      style: { max: 2 }
    gridView:
      renderType: tags
      behavior: { visible: true }

  # --------------------------------------------------------------------------
  # FILE & MEDIA FIELDS
  # --------------------------------------------------------------------------
  file:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: file
      style: { width: "150px" }
    entityFormContainer:
      <<: *form_default
      renderType: file
    kanbanView: *hidden
    gridView: *hidden

  image:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: image
      style: { width: "80px", size: thumbnail }
    entityFormContainer:
      <<: *form_default
      renderType: image
      style: { preview: true }
    kanbanView:
      renderType: image
      behavior: { visible: true }
    gridView:
      renderType: image
      behavior: { visible: true }

  avatar:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: avatar
      style: { align: center, width: "60px", size: sm }
    entityFormContainer:
      <<: *form_default
      renderType: avatar
      style: { size: lg }
    kanbanView:
      renderType: avatar
      behavior: { visible: true }
      style: { size: sm }
    gridView:
      renderType: avatar
      behavior: { visible: true }
      style: { size: md }

  signature:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: image
      style: { type: signature }
    kanbanView: *hidden
    gridView: *hidden

  video:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: file
      style: { type: video }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # S3/STORAGE FIELDS
  # --------------------------------------------------------------------------
  s3_bucket:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
    kanbanView: *hidden
    gridView: *hidden

  s3_key:
    dtype: str
    inherit: s3_bucket

  s3_url:
    dtype: str
    inherit: url

  s3_region:
    dtype: str
    inherit: s3_bucket

  hash:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
      style: { monospace: true }
    kanbanView: *hidden
    gridView: *hidden

  mime_type:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "120px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
    kanbanView: *hidden
    gridView: *hidden

  file_extension:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "80px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # BARCODE & SCANNING
  # --------------------------------------------------------------------------
  barcode:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "150px", monospace: true, type: code128 }
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { monospace: true }
    kanbanView: *hidden
    gridView:
      renderType: text
      behavior: { visible: true }
      style: { monospace: true }

  sku:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "120px", monospace: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  upc:
    dtype: str
    inherit: sku

  # --------------------------------------------------------------------------
  # COLOR
  # --------------------------------------------------------------------------
  color:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: color
      style: { width: "100px", showHex: true }
    entityFormContainer:
      <<: *form_default
      renderType: color
    kanbanView:
      renderType: color
      behavior: { visible: true }
    gridView:
      renderType: color
      behavior: { visible: true }

  # --------------------------------------------------------------------------
  # STATUS & STATE FIELDS
  # --------------------------------------------------------------------------
  status:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: badge
      style: { width: "120px" }
    entityFormContainer:
      <<: *form_default
      renderType: badge
    kanbanView:
      renderType: badge
      behavior: { visible: true }
    gridView:
      renderType: badge
      behavior: { visible: true }

  state_workflow:
    dtype: str
    inherit: status

  stage:
    dtype: str
    inherit: datalabel

  # --------------------------------------------------------------------------
  # CATEGORY & TYPE FIELDS
  # --------------------------------------------------------------------------
  type:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "120px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  category:
    dtype: str
    inherit: type

  # --------------------------------------------------------------------------
  # IDENTIFICATION NUMBERS
  # --------------------------------------------------------------------------
  sensitive_id:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      style: { mask: "***-***-***" }
    kanbanView: *hidden
    gridView: *hidden

  tax_id:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  reference_number:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px", monospace: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  invoice_number:
    dtype: str
    inherit: reference_number

  order_number:
    dtype: str
    inherit: reference_number

  po_number:
    dtype: str
    inherit: reference_number

  tracking_number:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "160px", linkable: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # AUTHENTICATION & SECURITY
  # --------------------------------------------------------------------------
  username:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px" }
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView: *hidden
    gridView: *hidden

  password_hash:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer: *hidden
    kanbanView: *hidden
    gridView: *hidden

  token:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
      style: { monospace: true }
    kanbanView: *hidden
    gridView: *hidden

  ip_address:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
      style: { width: "140px", monospace: true }
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
    kanbanView: *hidden
    gridView: *hidden

  user_agent:
    dtype: str
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: text
      behavior: { editable: false }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # UI FIELDS
  # --------------------------------------------------------------------------
  icon:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: icon
      style: { width: "80px", align: center }
    entityFormContainer:
      <<: *form_default
      renderType: icon
    kanbanView: *hidden
    gridView: *hidden

  label:
    dtype: str
    inherit: name

  # --------------------------------------------------------------------------
  # SYSTEM FIELDS
  # --------------------------------------------------------------------------
  version:
    dtype: int
    entityDataTable: *hidden
    entityFormContainer:
      <<: *form_default
      renderType: number
      behavior: { editable: false }
      style: { prefix: v }
    kanbanView: *hidden
    gridView: *hidden

  # --------------------------------------------------------------------------
  # DEFAULT TEXT
  # --------------------------------------------------------------------------
  text:
    dtype: str
    entityDataTable:
      <<: *table_default
      renderType: text
    entityFormContainer:
      <<: *form_default
      renderType: text
    kanbanView:
      renderType: text
      behavior: { visible: true }
    gridView:
      renderType: text
      behavior: { visible: true }

# ============================================================================
# EDIT TYPE MAPPING
# ============================================================================
# Maps fieldBusinessType to component-specific EDIT/INPUT rendering
# Version: 3.3.0
#
# ============================================================================
# PURPOSE & POSITION IN MAPPING CHAIN
# ============================================================================
#
# This file is STEP 2b in the field metadata pipeline:
#
#   Column Name (e.g., "budget_allocated_amt")
#         │
#         ▼
#   pattern-mapping.yaml
#   (column pattern → fieldBusinessType)
#         │
#         ▼
#   fieldBusinessType (e.g., "currency")
#         │
#         ├──────────────────────────────────────────┐
#         ▼                                          ▼
#   ┌─────────────────────────────────────┐   ┌─────────────────────────────┐
#   │  view-type-mapping.yaml             │   │  EDIT-TYPE-MAPPING.YAML     │
#   │  ─────────────────────────────────  │   │  (this file)                │
#   │  Defines how to DISPLAY the field   │   │  ─────────────────────────  │
#   │  (read-only rendering)              │   │  Defines how to EDIT field  │
#   │                                     │   │  (input controls)           │
#   │  Output: renderType, component,     │   │                             │
#   │          behavior, style            │   │  Output: inputType,         │
#   │                                     │   │          behavior, style,   │
#   └─────────────────────────────────────┘   │          validation         │
#                                             └─────────────────────────────┘
#
# ============================================================================
# THREE CATEGORIES (Quick Reference)
# ============================================================================
#
#   behavior:   Interaction settings (editable, filterable, sortable, visible)
#   style:      Visual presentation AND formatting (width, symbol, decimals, ...)
#   validation: Input constraints (required, min, max, pattern, ...)
#
# ============================================================================
# API OUTPUT STRUCTURE (v10.0.0)
# ============================================================================
#
# The API returns metadata with viewType and editType as top-level containers
# within each component. This separates VIEW and EDIT concerns cleanly:
#
#   {
#     "data": [...],
#     "metadata": {
#       "entityDataTable": {
#         "viewType": {                          ← All VIEW metadata here
#           "budget_allocated_amt": {
#             "dtype": "float",
#             "label": "Budget Allocated",
#             "type": "currency",                ← renderType from view-type-mapping.yaml
#             "behavior": { "visible": true, "sortable": true },
#             "style": { "symbol": "$", "decimals": 2 }
#           }
#         },
#         "editType": {                          ← All EDIT metadata (from this file)
#           "budget_allocated_amt": {
#             "dtype": "float",
#             "label": "Budget Allocated",
#             "type": "number",                  ← inputType from this file
#             "behavior": { "editable": true },
#             "style": { "symbol": "$", "decimals": 2 },
#             "validation": { "min": 0 },
#             "lookupSource": "datalabel",       ← For dropdown fields
#             "datalabelKey": "dl__status"       ← For datalabel lookup
#           }
#         }
#       }
#     }
#   }
#
# ============================================================================
# HOW THIS FILE IS COMPOSED
# ============================================================================
#
# This YAML file defines how each fieldBusinessType should render in EDIT mode
# across different UI components (entityDataTable, entityFormContainer, kanbanView, etc.)
#
# ============================================================================
# STRUCTURE
# ============================================================================
#
# Each fieldBusinessType entry has:
#
#   fieldBusinessType:
#     dtype: <data_type>           # REQUIRED - Database/JS data type (ONLY root-level field)
#     lookupSource: <source>       # For select fields: "datalabel" or "entityInstance"
#     inherit: <other_type>        # Optional - Inherit from another fieldBusinessType
#
#     # Component-specific definitions (REQUIRED for each supported component):
#     entityDataTable:
#       inputType: <type>          # REQUIRED - HTML5 input type or "component"
#       component: <name>          # ONLY when inputType is "component" (NEVER with HTML5 types!)
#       behavior: { editable, filterable, sortable, visible }
#       style: { ... }
#       validation: { ... }
#
#     entityFormContainer:
#       inputType: <type>
#       component: <name>          # ONLY when inputType is "component"
#       behavior: { editable }
#       style: { ... }
#       validation: { ... }
#
# ============================================================================
# CRITICAL RULE: HTML5 inputType vs component
# ============================================================================
#
# !! IMPORTANT !! When inputType is an HTML5 type, you CANNOT specify component!
#
# CORRECT (HTML5 input - no component):
#   entityDataTable:
#     inputType: number
#     behavior: { editable: true, filterable: true, sortable: true, visible: true }
#     validation: { min: 0 }
#
# CORRECT (Custom component):
#   entityDataTable:
#     inputType: component
#     component: CurrencyInput
#     behavior: { editable: true, filterable: true, sortable: true, visible: true }
#     validation: { min: 0 }
#
# WRONG (HTML5 input with component - INVALID!):
#   entityDataTable:
#     inputType: number
#     component: CurrencyInput    # <-- ERROR! Cannot have component with HTML5 inputType
#     behavior: { editable: true }
#
# Rule: If you need custom rendering, use inputType: "component" with component: <name>
#       If using HTML5 inputType (text, number, email, etc.), browser renders natively
#
# ============================================================================
# ROOT-LEVEL FIELDS
# ============================================================================
#
# dtype (REQUIRED) - Data type for the field (ONLY dtype is at root level):
#   - str          : String/text
#   - int          : Integer number
#   - float        : Decimal number
#   - bool         : Boolean true/false
#   - uuid         : UUID identifier
#   - date         : Date only (YYYY-MM-DD)
#   - timestamp    : Date and time
#   - jsonb        : JSON object
#   - array[str]   : Array of strings
#   - array[uuid]  : Array of UUIDs
#
# lookupSource - For select/dropdown fields (optional):
#   - datalabel      : Load options from datalabel settings table
#   - entityInstance : Load options from entity instance lookup
#
# inherit - Copy all settings from another fieldBusinessType (optional)
#
# ============================================================================
# COMPONENT-LEVEL FIELDS
# ============================================================================
#
# inputType (REQUIRED) - How the field is edited:
#
#   HTML5 native types (NO component allowed with these!):
#   - text         : Single line text input
#   - textarea     : Multi-line text input
#   - email        : Email input with validation
#   - tel          : Phone number input
#   - url          : URL input with validation
#   - number       : Numeric input
#   - date         : Date picker (native)
#   - time         : Time picker (native)
#   - datetime-local : DateTime picker (native)
#   - checkbox     : Checkbox input
#   - color        : Color picker (native)
#   - file         : File upload (native)
#   - range        : Range slider (native)
#   - hidden       : Hidden field (not rendered)
#   - readonly     : Display only, not editable
#
#   Custom types (REQUIRES component field):
#   - component    : Custom React component - MUST specify component: <name>
#   - select       : Dropdown select - MUST specify component: <name>
#
#   v8.3.2 Special inputTypes (standalone, no component needed):
#   - BadgeDropdownSelect : Datalabel dropdown with colored badges
#                           Uses datalabel cache, renders colored badge options
#                           lookupSource: datalabel required
#
# component - React component name:
#   - ONLY allowed when inputType is "component" or "select"
#   - NEVER use with HTML5 inputTypes (text, number, email, date, etc.)
#   - Examples: DatalabelSelect, EntitySelect, CurrencyInput, RichTextEditor, DAGVisualizer
#
# behavior - Field behavior settings (differs by UI component):
#   For entityDataTable:
#     - editable: bool    : Whether field can be edited inline
#     - filterable: bool  : Whether field appears in filters
#     - sortable: bool    : Whether column can be sorted
#     - visible: bool     : Whether column is visible by default
#   For entityFormContainer:
#     - editable: bool    : Whether field can be edited
#   For kanbanView/calendarView/dagView:
#     - editable: bool    : Whether field can be edited
#
# style - Styling/formatting options (see STYLE OPTIONS section)
#
# validation - Validation rules (can be on ANY component, not just forms!)
#
# ============================================================================
# UI COMPONENTS
# ============================================================================
#
#   entityDataTable:      # Table/grid inline editing
#     behavior: { editable, filterable, sortable, visible }
#
#   entityFormContainer:  # Detail page forms
#     behavior: { editable }
#
#   kanbanView:           # Kanban card editing
#     behavior: { editable }
#
#   calendarView:         # Calendar event editing
#     behavior: { editable }
#
#   dagView:              # DAG node editing
#     behavior: { editable }
#
# ============================================================================
# STYLE OPTIONS (style: {})
# ============================================================================
#
# Visual and formatting options:
#   - size: sm|md|lg           : Input size
#   - rows: number             : Textarea rows
#   - resizable: bool          : Allow resize
#   - placeholder: string      : Placeholder text (e.g., "Enter project name...")
#   - helpText: string         : Tooltip/help text shown near input (contextual guidance)
#   - autocomplete: string     : HTML autocomplete attribute
#   - mask: string             : Input mask pattern
#   - symbol: string           : Currency/unit symbol
#   - decimals: number         : Decimal places
#   - locale: string           : Locale for formatting (en-CA)
#   - step: number             : Step increment
#   - unit: string             : Unit suffix (kg, sq ft)
#   - showColor: bool          : Show color indicator
#   - searchable: bool         : Enable search in select
#   - clearable: bool          : Allow clearing value
#   - displayField: string     : Field to display for lookups
#   - maxSelections: number    : Max items for multi-select
#   - accept: string           : File types for upload
#   - maxSize: number          : Max file size in bytes
#   - preview: bool            : Show file preview
#   - crop: bool               : Enable image cropping
#   - aspectRatio: number      : Image aspect ratio
#
# ============================================================================
# VALIDATION OPTIONS (validation: {})
# ============================================================================
#
# Field validation rules (can apply to ANY component!):
#   - required: bool           : Field is required
#   - min: number              : Minimum value (numbers)
#   - max: number              : Maximum value (numbers)
#   - minLength: number        : Minimum string length
#   - maxLength: number        : Maximum string length
#   - pattern: string          : Regex pattern for validation
#
# ============================================================================
# GUIDELINES
# ============================================================================
#
# 1. ONLY dtype AT ROOT LEVEL
#    - dtype is the only field common to all components
#    - inputType, behavior, style, validation vary per component
#
# 2. HTML5 inputType = NO component
#    - If inputType is text, number, email, date, checkbox, etc. → NO component field
#    - Browser provides native rendering for HTML5 types
#
# 3. CUSTOM RENDERING = inputType: component
#    - If you need custom UI (CurrencyInput, RatingInput, etc.)
#    - Use inputType: "component" WITH component: <ComponentName>
#
# 4. DEFINE EACH COMPONENT SEPARATELY
#    - Each component may have different inputType
#    - Each component may have different validation strictness
#    - entityDataTable needs: filterable, sortable, visible in behavior
#
# 5. VALIDATION ON BOTH TABLE AND FORM
#    - Table editing can have validation too (min, max, pattern)
#    - Form usually has stricter validation (required, minLength, etc.)
#
# 6. USE INHERITANCE FOR SIMILAR TYPES
#    - inherit: other_type - Copies all settings from another type
#    - Good for: title inherits from name, summary inherits from description
#
# ============================================================================
# EXAMPLES
# ============================================================================
#
# Simple text field (HTML5 - NO component):
#   name:
#     dtype: str
#     entityDataTable:
#       inputType: text
#       behavior: { editable: true, filterable: true, sortable: true, visible: true }
#       validation: { maxLength: 255 }
#     entityFormContainer:
#       inputType: text
#       behavior: { editable: true }
#       validation: { required: true, minLength: 1, maxLength: 255 }
#       style: { size: lg }
#
# Currency field (HTML5 number with style formatting):
#   currency:
#     dtype: float
#     entityDataTable:
#       inputType: number
#       behavior: { editable: true, filterable: true, sortable: true, visible: true }
#       style: { step: 0.01 }
#       validation: { min: 0 }
#     entityFormContainer:
#       inputType: number
#       behavior: { editable: true }
#       style: { symbol: "$", decimals: 2, locale: en-CA, step: 0.01 }
#       validation: { min: 0 }
#
# Select with lookup (Custom component):
#   datalabel:
#     dtype: str
#     lookupSource: datalabel
#     entityDataTable:
#       inputType: select
#       component: DatalabelSelect
#       behavior: { editable: true, filterable: true, sortable: true, visible: true }
#     entityFormContainer:
#       inputType: select
#       component: DatalabelSelect
#       behavior: { editable: true }
#       style: { showColor: true, searchable: true }
#
# Readonly field (different behavior per component):
#   created_ts:
#     dtype: timestamp
#     entityDataTable:
#       inputType: readonly
#       behavior: { editable: false, filterable: false, sortable: true, visible: true }
#     entityFormContainer:
#       inputType: readonly
#       behavior: { editable: false }
#       style: { showRelative: true }
#
# ============================================================================

# ============================================================================
# FIELD BUSINESS TYPE DEFINITIONS
# ============================================================================
fieldBusinessTypes:

  # --------------------------------------------------------------------------
  # IDENTITY & CORE
  # --------------------------------------------------------------------------
  uuid:
    dtype: uuid
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }
      style: { monospace: true }
    kanbanView:
      inputType: readonly
      behavior: { editable: false }

  code:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { pattern: "^[A-Za-z0-9-_]+$" }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      validation: { required: true, pattern: "^[A-Za-z0-9-_]+$" }
      style: { placeholder: "PROJ-001", helpText: "Letters, numbers, hyphens and underscores only" }
    kanbanView:
      inputType: text
      behavior: { editable: true }

  name:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { maxLength: 255 }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      validation: { required: true, minLength: 1, maxLength: 255 }
      style: { size: lg, placeholder: "Enter name...", helpText: "The display name for this record" }
    kanbanView:
      inputType: text
      behavior: { editable: true }

  title:
    dtype: str
    inherit: name

  subject:
    dtype: str
    inherit: name

  description:
    dtype: str
    entityDataTable:
      inputType: textarea
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: textarea
      behavior: { editable: true }
      style: { rows: 4, resizable: true }
    kanbanView:
      inputType: textarea
      behavior: { editable: true }

  summary:
    dtype: str
    inherit: description

  # --------------------------------------------------------------------------
  # CONTACT FIELDS
  # --------------------------------------------------------------------------
  email:
    dtype: str
    entityDataTable:
      inputType: email
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { pattern: "^[^@]+@[^@]+\\.[^@]+$" }
    entityFormContainer:
      inputType: email
      behavior: { editable: true }
      validation: { pattern: "^[^@]+@[^@]+\\.[^@]+$" }
      style: { autocomplete: email, placeholder: "user@example.com", helpText: "Valid email address required" }

  phone:
    dtype: str
    entityDataTable:
      inputType: tel
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: tel
      behavior: { editable: true }
      style: { countryCode: CA, mask: "(###) ###-####" }

  url:
    dtype: str
    entityDataTable:
      inputType: url
      behavior: { editable: true, filterable: false, sortable: false, visible: true }
      validation: { pattern: "^https?://" }
    entityFormContainer:
      inputType: url
      behavior: { editable: true }
      validation: { pattern: "^https?://" }
      style: { placeholder: "https://..." }

  # --------------------------------------------------------------------------
  # ADDRESS FIELDS
  # --------------------------------------------------------------------------
  address:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: textarea
      behavior: { editable: true }
      style: { country: CA, rows: 3 }

  # address_line, street, city, state, province → consolidated to 'text' type
  # See pattern-mapping.yaml for patterns that map to 'text'

  country:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { defaultValue: CA }

  postal_code:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { pattern: "^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$" }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      validation: { pattern: "^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$" }
      style: { mask: "A#A #A#", country: CA }

  # --------------------------------------------------------------------------
  # CURRENCY FIELDS
  # --------------------------------------------------------------------------
  currency:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { symbol: "$", decimals: 2, locale: en-CA, placeholder: "0.00", helpText: "Amount in Canadian dollars" }
      validation: { min: 0 }
    kanbanView:
      inputType: number
      behavior: { editable: true }
      validation: { min: 0 }

  currency_cents:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { symbol: "$" }
      validation: { min: 0 }

  # --------------------------------------------------------------------------
  # PERCENTAGE FIELDS
  # --------------------------------------------------------------------------
  percentage:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0, max: 100 }
    entityFormContainer:
      inputType: range
      behavior: { editable: true }
      style: { min: 0, max: 100, step: 1, showValue: true }
      validation: { min: 0, max: 100 }

  # --------------------------------------------------------------------------
  # DATE & TIME FIELDS
  # --------------------------------------------------------------------------
  date:
    dtype: date
    entityDataTable:
      inputType: date
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: date
      behavior: { editable: true }
      style: { locale: en-CA, clearable: true }
    kanbanView:
      inputType: date
      behavior: { editable: true }
    calendarView:
      inputType: date
      behavior: { editable: true }

  timestamp:
    dtype: timestamp
    entityDataTable:
      inputType: datetime-local
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: datetime-local
      behavior: { editable: true }
      style: { locale: en-CA, showTimezone: false }
    kanbanView:
      inputType: datetime-local
      behavior: { editable: true }
    calendarView:
      inputType: datetime-local
      behavior: { editable: true }

  timestamp_readonly:
    dtype: timestamp
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: true, visible: true }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }
    kanbanView:
      inputType: readonly
      behavior: { editable: false }

  time:
    dtype: str
    entityDataTable:
      inputType: time
      behavior: { editable: true, filterable: false, sortable: true, visible: true }
    entityFormContainer:
      inputType: time
      behavior: { editable: true }
      style: { step: 15 }

  # --------------------------------------------------------------------------
  # DURATION FIELDS
  # --------------------------------------------------------------------------
  duration:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { units: [hours, minutes], defaultUnit: minutes }
      validation: { min: 0 }
    calendarView:
      inputType: number
      behavior: { editable: true }

  duration_minutes:
    dtype: int
    inherit: duration

  duration_hours:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { units: [hours], defaultUnit: hours }
      validation: { min: 0 }

  duration_seconds:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { units: [minutes, seconds], defaultUnit: seconds }
      validation: { min: 0 }

  duration_ms:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { suffix: ms }
      validation: { min: 0 }

  # --------------------------------------------------------------------------
  # BOOLEAN FIELDS
  # --------------------------------------------------------------------------
  boolean:
    dtype: bool
    entityDataTable:
      inputType: checkbox
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: checkbox
      behavior: { editable: true }
      style: { label: true }
    kanbanView:
      inputType: checkbox
      behavior: { editable: true }

  status_flag:
    dtype: bool
    entityDataTable:
      inputType: checkbox
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      style: { trueLabel: Active, falseLabel: Inactive }
    entityFormContainer:
      inputType: checkbox
      behavior: { editable: true }
      style: { trueLabel: Active, falseLabel: Inactive }
    kanbanView:
      inputType: checkbox
      behavior: { editable: true }
      style: { trueLabel: Active, falseLabel: Inactive }

  # --------------------------------------------------------------------------
  # DATALABEL & ENTITY REFERENCE FIELDS
  # --------------------------------------------------------------------------
  datalabel:
    dtype: str
    lookupSource: datalabel
    entityDataTable:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true }
      style: { showColor: true, searchable: true }
    kanbanView:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true }
    dagView:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true }

  # DAG datalabels - hierarchical stage/state/status with parent-child relations
  # Matched by: dl__*_stage, dl__*_state, dl__*_status
  # v8.3.2: View mode shows DAGVisualizer, Edit mode uses BadgeDropdownSelect
  datalabel_dag:
    dtype: str
    lookupSource: datalabel
    entityDataTable:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: component
      component: BadgeDropdownSelect
      behavior: { editable: true }
    kanbanView:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true }
    dagView:
      inputType: select
      component: DataLabelSelect
      behavior: { editable: true }

  # Entity reference fields - single UUID reference to another entity
  # Frontend uses entityInstanceId for both view and edit mode (context switches)
  # View mode: resolves UUID to display name via ref_data_entityInstance, renders as clickable link
  # Edit mode: renders EntitySelect component with lookupSource: entityInstance
  entityInstance_Id:
    dtype: uuid
    lookupSource: entityInstance
    entityDataTable:
      inputType: entityInstanceId
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: entityInstanceId
      behavior: { editable: true }
    kanbanView:
      inputType: entityInstanceId
      behavior: { editable: true }

  # Entity reference fields - array of UUIDs referencing multiple entities
  # Frontend uses entityInstanceIds for both view and edit mode (context switches)
  # View mode: resolves UUIDs to display names via ref_data_entityInstance, renders as chip list
  # Edit mode: renders MultiEntitySelect component with lookupSource: entityInstance
  entityInstance_Ids:
    dtype: array[uuid]
    lookupSource: entityInstance
    entityDataTable:
      inputType: entityInstanceIds
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: entityInstanceIds
      behavior: { editable: true }
    kanbanView:
      inputType: entityInstanceIds
      behavior: { editable: true }

  # --------------------------------------------------------------------------
  # QUANTITY & NUMBER FIELDS
  # --------------------------------------------------------------------------
  quantity:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { step: 1 }
      validation: { min: 0 }

  count:
    dtype: int
    inherit: quantity

  number:
    dtype: int
    inherit: quantity

  sort_order:
    dtype: int
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: false, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { step: 1 }
      validation: { min: 0 }

  # --------------------------------------------------------------------------
  # MEASUREMENT FIELDS
  # --------------------------------------------------------------------------
  area_sqft:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { unit: "sq ft", decimals: 2 }
      validation: { min: 0 }

  volume_m3:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { unit: "m³", decimals: 3 }
      validation: { min: 0 }

  dimension_cm:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: false, sortable: false, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { unit: cm }

  weight_kg:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { unit: kg, decimals: 2 }
      validation: { min: 0 }

  file_size:
    dtype: int
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: true, visible: true }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  capacity:
    dtype: int
    inherit: quantity

  # --------------------------------------------------------------------------
  # RATING & SCORE FIELDS
  # --------------------------------------------------------------------------
  rating:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
      validation: { min: 0, max: 5 }
      style: { step: 0.5 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { max: 5, step: 0.5 }
      validation: { min: 0, max: 5 }

  score:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { step: 1 }

  # --------------------------------------------------------------------------
  # COORDINATES & GEOLOCATION
  # --------------------------------------------------------------------------
  latitude:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
      validation: { min: -90, max: 90 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { precision: 6, type: latitude }
      validation: { min: -90, max: 90 }

  longitude:
    dtype: float
    entityDataTable:
      inputType: number
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
      validation: { min: -180, max: 180 }
    entityFormContainer:
      inputType: number
      behavior: { editable: true }
      style: { precision: 6, type: longitude }
      validation: { min: -180, max: 180 }

  geolocation:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { showMap: true, allowManual: true }

  # --------------------------------------------------------------------------
  # TEXT CONTENT FIELDS
  # --------------------------------------------------------------------------
  # notes, instructions → consolidated to 'text_long' type
  # See pattern-mapping.yaml for patterns that map to 'text_long'

  text_long:
    dtype: str
    entityDataTable:
      inputType: textarea
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: textarea
      behavior: { editable: true }
      style: { rows: 4, resizable: true }

  rich_text:
    dtype: str
    entityDataTable:
      inputType: textarea
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: textarea
      behavior: { editable: true }
      style: { rows: 6, minHeight: 200 }

  # --------------------------------------------------------------------------
  # JSON & STRUCTURED DATA
  # --------------------------------------------------------------------------
  json:
    dtype: jsonb
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: component
      component: MetadataTable
      behavior: { editable: true }
      style: { mode: table }

  json_schema:
    dtype: jsonb
    inherit: json

  tags:
    dtype: array[str]
    entityDataTable:
      inputType: select
      component: EditableTags
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: select
      component: EditableTags
      behavior: { editable: true }
      style: { allowCreate: true, maxTags: null }

  # --------------------------------------------------------------------------
  # FILE & MEDIA FIELDS
  # --------------------------------------------------------------------------
  file:
    dtype: str
    entityDataTable:
      inputType: file
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: file
      behavior: { editable: true }
      style: { accept: "*/*", maxSize: 10485760 }

  image:
    dtype: str
    entityDataTable:
      inputType: file
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: file
      behavior: { editable: true }
      style: { accept: "image/*", maxSize: 5242880, preview: true }

  avatar:
    dtype: str
    entityDataTable:
      inputType: file
      behavior: { editable: true, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: file
      behavior: { editable: true }
      style: { accept: "image/*", maxSize: 2097152, crop: true, aspectRatio: 1 }

  signature:
    dtype: str
    entityFormContainer:
      inputType: file
      behavior: { editable: true }
      style: { accept: "image/*", width: 400, height: 200 }

  video:
    dtype: str
    entityFormContainer:
      inputType: file
      behavior: { editable: true }
      style: { accept: "video/*", maxDuration: 60 }

  # --------------------------------------------------------------------------
  # S3/STORAGE FIELDS (typically readonly)
  # --------------------------------------------------------------------------
  s3_bucket:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  s3_key:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  s3_url:
    dtype: str
    inherit: url

  s3_region:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  hash:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  mime_type:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: true, sortable: true, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  file_extension:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: true, sortable: true, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  # --------------------------------------------------------------------------
  # BARCODE & SCANNING
  # --------------------------------------------------------------------------
  barcode:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { type: code128 }

  sku:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }

  upc:
    dtype: str
    inherit: sku

  # --------------------------------------------------------------------------
  # COLOR
  # --------------------------------------------------------------------------
  color:
    dtype: str
    entityDataTable:
      inputType: color
      behavior: { editable: true, filterable: true, sortable: false, visible: true }
    entityFormContainer:
      inputType: color
      behavior: { editable: true }
      style: { presets: true, outputFormat: hex }

  # --------------------------------------------------------------------------
  # STATUS & STATE FIELDS
  # --------------------------------------------------------------------------
  status:
    dtype: str
    entityDataTable:
      inputType: select
      component: StatusSelect
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: select
      component: StatusSelect
      behavior: { editable: true }

  state_workflow:
    dtype: str
    inherit: status

  stage:
    dtype: str
    inherit: datalabel

  # --------------------------------------------------------------------------
  # CATEGORY & TYPE FIELDS
  # --------------------------------------------------------------------------
  type:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }

  category:
    dtype: str
    inherit: type

  # --------------------------------------------------------------------------
  # IDENTIFICATION NUMBERS
  # --------------------------------------------------------------------------
  sensitive_id:
    dtype: str
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { mask: "###-###-###", secure: true }

  tax_id:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }

  reference_number:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }

  invoice_number:
    dtype: str
    inherit: reference_number

  order_number:
    dtype: str
    inherit: reference_number

  po_number:
    dtype: str
    inherit: reference_number

  tracking_number:
    dtype: str
    inherit: reference_number

  # --------------------------------------------------------------------------
  # AUTHENTICATION & SECURITY (typically readonly/hidden)
  # --------------------------------------------------------------------------
  username:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }

  password_hash:
    dtype: str
    entityDataTable:
      inputType: hidden
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: hidden
      behavior: { editable: false }

  token:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  ip_address:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: true, sortable: true, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  user_agent:
    dtype: str
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }

  # --------------------------------------------------------------------------
  # UI FIELDS
  # --------------------------------------------------------------------------
  icon:
    dtype: str
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
      style: { library: lucide }

  label:
    dtype: str
    inherit: name

  # --------------------------------------------------------------------------
  # SYSTEM FIELDS
  # --------------------------------------------------------------------------
  version:
    dtype: int
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false }
    kanbanView:
      inputType: readonly
      behavior: { editable: false }

  # --------------------------------------------------------------------------
  # DEFAULT TEXT
  # --------------------------------------------------------------------------
  text:
    dtype: str
    entityDataTable:
      inputType: text
      behavior: { editable: true, filterable: true, sortable: true, visible: true }
    entityFormContainer:
      inputType: text
      behavior: { editable: true }
    kanbanView:
      inputType: text
      behavior: { editable: true }

  # --------------------------------------------------------------------------
  # SYSTEM INTERNAL FIELDS (hidden from UI)
  # --------------------------------------------------------------------------
  # These fields are for internal system use only (from_ts, to_ts, active_flag)
  # They are hidden and not editable in all views

  systemInternal_ts:
    dtype: timestamp
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false, visible: false }
    kanbanView:
      inputType: readonly
      behavior: { editable: false, visible: false }
    calendarView:
      inputType: readonly
      behavior: { editable: false, visible: false }
    dagView:
      inputType: readonly
      behavior: { editable: false, visible: false }

  systemInternal_flag:
    dtype: bool
    entityDataTable:
      inputType: readonly
      behavior: { editable: false, filterable: false, sortable: false, visible: false }
    entityFormContainer:
      inputType: readonly
      behavior: { editable: false, visible: false }
    kanbanView:
      inputType: readonly
      behavior: { editable: false, visible: false }
    calendarView:
      inputType: readonly
      behavior: { editable: false, visible: false }
    dagView:
      inputType: readonly
      behavior: { editable: false, visible: false }

# ============================================================================
# FORM FIELD TYPE MAPPINGS (for FormBuilder)
# Maps form field types to fieldBusinessTypes
# ============================================================================
formFieldTypeMapping:
  text: text
  textarea: notes
  number: quantity
  email: email
  phone: phone
  url: url
  address: address
  select: datalabel
  select_multiple: entityInstance_Ids
  radio: datalabel
  checkbox: boolean
  taskcheck: boolean
  datetime: timestamp
  date: date
  time: time
  duration: duration
  file: file
  image_capture: image
  video_capture: video
  signature: signature
  initials: signature
  range: percentage
  currency: currency
  percentage: percentage
  calculation: number
  wiki: rich_text
  datatable: json
  toggle: boolean
  rating: rating
  geolocation: geolocation
  qr_scanner: barcode
  barcode_scanner: barcode
  menu_button: json

{
  "version": "1.0.0",
  "architecture": "goal-oriented-agentic",
  "config_name": "Project & Task Stakeholder Assistant",
  "description": "Conversational AI agent for project stakeholders to query project status, task progress, team assignments, and budgets",

  "goals": [
    {
      "goal_id": "GREET_AND_UNDERSTAND_QUERY",
      "description": "Welcome stakeholder and understand their project/task query",
      "goal_type": "conversational",
      "is_terminal": false,
      "primary_agent": "conversational_agent",
      "goal_success_criteria": {
        "all_of": [
          {
            "json_path": "query.intent",
            "operator": "is_set"
          }
        ],
        "evaluation_mode": "deterministic"
      },
      "mcp_tool_boundary": [
        "update_session_memory_data",
        "get_session_memory_data"
      ],
      "conversation_tactics": ["professional_greeting", "clarifying_questions"],
      "max_turns": 3,
      "goal_branching_condition": {
        "type": "hybrid",
        "rules": [
          {
            "priority": 100,
            "condition": {
              "json_path": "query.intent",
              "operator": "is_set"
            },
            "next_goal": "RETRIEVE_PROJECT_TASK_DATA"
          }
        ]
      },
      "examples": [
        {
          "input": "User says: 'What's the status of Project Alpha?'",
          "output": {
            "ask_talk_reply_to_customer": "I can help you with that! Let me look up the current status of Project Alpha for you.",
            "session_memory_data_update": {
              "query": {
                "intent": "project_status",
                "entity": "project",
                "target": "Project Alpha"
              }
            }
          }
        },
        {
          "input": "User says: 'Show me all tasks assigned to John'",
          "output": {
            "ask_talk_reply_to_customer": "Let me find all tasks currently assigned to John.",
            "session_memory_data_update": {
              "query": {
                "intent": "task_list_by_assignee",
                "entity": "task",
                "target": "John"
              }
            }
          }
        }
      ]
    },
    {
      "goal_id": "RETRIEVE_PROJECT_TASK_DATA",
      "description": "Execute API calls to retrieve project/task data based on stakeholder query",
      "goal_type": "execution",
      "is_terminal": false,
      "primary_agent": "mcp_agent",
      "fallback_agent": "conversational_agent",
      "goal_success_criteria": {
        "all_of": [
          {
            "json_path": "data.retrieved",
            "operator": "is_set"
          }
        ],
        "evaluation_mode": "deterministic"
      },
      "mcp_tool_boundary": [
        "project_list",
        "project_get",
        "project_get_tasks",
        "project_get_wiki",
        "project_get_forms",
        "project_get_artifacts",
        "task_list",
        "task_get",
        "task_get_assignees",
        "task_get_case_notes",
        "task_get_activity",
        "task_get_kanban",
        "employee_list",
        "employee_get",
        "customer_list",
        "customer_get",
        "business_list",
        "business_get",
        "office_list",
        "office_get",
        "linkage_list",
        "update_session_memory_data",
        "get_session_memory_data"
      ],
      "conversation_tactics": ["data_retrieval", "progress_updates"],
      "max_turns": 5,
      "goal_branching_condition": {
        "type": "deterministic",
        "rules": [
          {
            "priority": 100,
            "condition": {
              "json_path": "data.retrieved",
              "operator": "is_set"
            },
            "next_goal": "FORMAT_AND_PRESENT_RESPONSE"
          },
          {
            "priority": 50,
            "condition": {
              "json_path": "data.retrieved",
              "operator": "is_empty"
            },
            "next_goal": "HANDLE_NO_DATA_FOUND"
          }
        ]
      },
      "examples": [
        {
          "input": "Need to get project status for 'Project Alpha'",
          "output": {
            "commands_to_run": [
              {
                "tool": "project_list",
                "params": {
                  "query_search": "Project Alpha",
                  "query_limit": 1
                }
              }
            ],
            "ask_talk_reply_to_customer": "Retrieving project information..."
          }
        },
        {
          "input": "Got project data, now need tasks",
          "output": {
            "commands_to_run": [
              {
                "tool": "project_get_tasks",
                "params": {
                  "id": "project-uuid-123",
                  "query_limit": 20
                }
              }
            ],
            "ask_talk_reply_to_customer": "Found the project! Now getting task details..."
          }
        }
      ]
    },
    {
      "goal_id": "FORMAT_AND_PRESENT_RESPONSE",
      "description": "Format retrieved data into stakeholder-friendly response with insights",
      "goal_type": "conversational",
      "is_terminal": false,
      "primary_agent": "conversational_agent",
      "goal_success_criteria": {
        "all_of": [
          {
            "json_path": "response.formatted",
            "operator": "is_set"
          }
        ],
        "evaluation_mode": "deterministic"
      },
      "mcp_tool_boundary": [
        "update_session_memory_data",
        "get_session_memory_data"
      ],
      "conversation_tactics": ["executive_summary", "data_visualization", "actionable_insights"],
      "max_turns": 3,
      "goal_branching_condition": {
        "type": "hybrid",
        "rules": [
          {
            "priority": 100,
            "condition": "User satisfied with response or no follow-up questions",
            "next_goal": "CONFIRM_AND_CLOSE"
          },
          {
            "priority": 50,
            "condition": "User asks follow-up question about same project/task",
            "next_goal": "RETRIEVE_PROJECT_TASK_DATA"
          },
          {
            "priority": 30,
            "condition": "User asks completely new question",
            "next_goal": "GREET_AND_UNDERSTAND_QUERY"
          }
        ]
      },
      "formatting_guidelines": {
        "project_status_summary": {
          "include": ["name", "stage", "budget_allocated_amt", "budget_spent_amt", "planned_start_date", "planned_end_date", "manager_employee_id", "progress_percentage"],
          "format": "**Project:** {name}\n**Status:** {stage}\n**Budget:** ${budget_spent_amt} / ${budget_allocated_amt}\n**Timeline:** {planned_start_date} - {planned_end_date}\n**Manager:** {manager_name}\n**Progress:** {progress_percentage}%"
        },
        "task_list_summary": {
          "include": ["name", "dl__task_stage", "dl__task_priority", "estimated_hours", "actual_hours", "assignee_name"],
          "format": "- **{name}** ({dl__task_stage}) - Priority: {dl__task_priority} | Assigned to: {assignee_name} | Hours: {actual_hours}/{estimated_hours}"
        },
        "task_detail_summary": {
          "include": ["name", "descr", "dl__task_stage", "dl__task_priority", "estimated_hours", "actual_hours", "story_points", "created_ts", "updated_ts"],
          "format": "**Task:** {name}\n**Description:** {descr}\n**Status:** {dl__task_stage} | **Priority:** {dl__task_priority}\n**Effort:** {actual_hours} / {estimated_hours} hours | {story_points} points\n**Created:** {created_ts} | **Updated:** {updated_ts}"
        }
      },
      "examples": [
        {
          "input": "Retrieved project with 5 tasks (2 completed, 2 in-progress, 1 open)",
          "output": {
            "ask_talk_reply_to_customer": "**Project Alpha Status:**\n\nThe project is currently **In Progress** with a budget of $45,000 spent out of $100,000 allocated. Timeline is on track (Jan 15 - Jun 30, 2025).\n\n**Task Summary (5 total):**\n‚úÖ Completed: 2 tasks\nüîÑ In Progress: 2 tasks  \nüìã Open: 1 task\n\n**Key Highlights:**\n- 40% of tasks completed\n- Budget utilization at 45%\n- No blockers reported\n\nWould you like details on specific tasks or team assignments?",
            "session_memory_data_update": {
              "response": {
                "formatted": true
              }
            }
          }
        }
      ]
    },
    {
      "goal_id": "HANDLE_NO_DATA_FOUND",
      "description": "Handle cases where no data is found for the query",
      "goal_type": "conversational",
      "is_terminal": false,
      "primary_agent": "conversational_agent",
      "goal_success_criteria": {
        "evaluation_mode": "semantic"
      },
      "mcp_tool_boundary": [
        "update_session_memory_data",
        "get_session_memory_data"
      ],
      "conversation_tactics": ["empathetic_response", "alternative_suggestions"],
      "max_turns": 2,
      "goal_branching_condition": {
        "type": "hybrid",
        "rules": [
          {
            "priority": 100,
            "condition": "User refines query or asks different question",
            "next_goal": "GREET_AND_UNDERSTAND_QUERY"
          },
          {
            "priority": 50,
            "condition": "User wants to end conversation",
            "next_goal": "CONFIRM_AND_CLOSE"
          }
        ]
      },
      "examples": [
        {
          "input": "No project found for 'Project Zeta'",
          "output": {
            "ask_talk_reply_to_customer": "I couldn't find a project named 'Project Zeta' in the system. \n\nWould you like me to:\n1. Search for projects with similar names?\n2. Show all active projects?\n3. Search by a different criteria (e.g., project manager, business unit)?"
          }
        }
      ]
    },
    {
      "goal_id": "CONFIRM_AND_CLOSE",
      "description": "Confirm stakeholder satisfaction and close conversation",
      "goal_type": "terminal",
      "is_terminal": true,
      "primary_agent": "conversational_agent",
      "goal_success_criteria": {
        "evaluation_mode": "semantic"
      },
      "mcp_tool_boundary": [
        "update_session_memory_data",
        "get_session_memory_data"
      ],
      "conversation_tactics": ["satisfaction_check", "graceful_closure"],
      "max_turns": 2,
      "termination_sequence": {
        "enabled": true,
        "steps": [
          {
            "step": 1,
            "action": "conversational_goodbye",
            "agent": "conversational_agent",
            "message_template": "Thank you for using the PMO Assistant! If you need any other project or task information, feel free to ask anytime.",
            "tactics": ["graceful_closure"]
          }
        ],
        "on_completion": "END"
      },
      "goal_branching_condition": {
        "type": "semantic",
        "rules": [
          {
            "condition": "User satisfied and no additional requests",
            "next_goal": "END"
          }
        ]
      }
    }
  ],

  "agent_profiles": {
    "conversational_agent": {
      "agent_name": "PMO Project & Task Assistant",
      "agent_identity": "Professional project management assistant for stakeholders and team members",
      "capabilities": [
        "Project status queries",
        "Task progress tracking",
        "Team assignment visibility",
        "Budget and timeline monitoring",
        "Executive summaries and insights"
      ],
      "personality_traits": {
        "formality": "professional_friendly",
        "verbosity": "concise_executive",
        "data_presentation": "visual_structured"
      },
      "system_prompt_template": "You are the PMO Project & Task Assistant for Huron Home Services.\n\nYour role:\n- Help stakeholders understand project status and progress\n- Provide clear, concise answers about tasks and assignments\n- Present data in stakeholder-friendly formats\n- Highlight key insights, risks, and progress indicators\n- Use professional language suitable for executives and managers\n\nGuidelines:\n1. Always structure responses with clear headers and bullet points\n2. Present budget and timeline data prominently\n3. Highlight completed vs in-progress work\n4. Surface any blockers or risks\n5. Offer follow-up options proactively\n6. Keep responses concise but comprehensive\n7. Use emojis sparingly for status indicators (‚úÖ ‚ùå üîÑ ‚ö†Ô∏è)\n\n{{SESSION_MEMORY_DATA}}",
      "response_formatting": {
        "use_markdown": true,
        "use_bullet_points": true,
        "use_tables": false,
        "use_emojis": "minimal",
        "max_response_length": "750_tokens"
      },
      "tactics_library": {
        "professional_greeting": "Greet stakeholder professionally and offer assistance",
        "clarifying_questions": "Ask specific questions to understand query intent",
        "executive_summary": "Provide high-level summary before detailed data",
        "data_visualization": "Structure data with headers, bullets, progress indicators",
        "actionable_insights": "Highlight key takeaways and recommended actions",
        "empathetic_response": "Acknowledge when data isn't available and offer alternatives",
        "alternative_suggestions": "Suggest different search criteria or related queries",
        "satisfaction_check": "Verify stakeholder has the information they need",
        "graceful_closure": "End conversation professionally"
      }
    },
    "mcp_agent": {
      "agent_name": "Data Retrieval Agent",
      "agent_identity": "API integration specialist for project and task data",
      "capabilities": [
        "Project data retrieval",
        "Task data retrieval",
        "Employee lookups",
        "Cross-entity linking",
        "Filtered searches"
      ],
      "system_prompt_template": "Execute API calls to retrieve project and task data.\n\n**Query Understanding:**\n- Parse user intent (project status, task list, budget, timeline, assignments)\n- Identify target entity (project name, task ID, employee name)\n- Determine necessary API calls and sequence\n\n**API Call Strategy:**\n1. **Project Status Query:** Call `project_list` with search filter ‚Üí `project_get` for details ‚Üí `project_get_tasks` for task list\n2. **Task List Query:** Call `task_list` with filters (assignee, status, project_id)\n3. **Task Detail Query:** Call `task_get` ‚Üí `task_get_activity` for timeline ‚Üí `task_get_assignees` for team\n4. **Budget Query:** Call `project_get` and extract budget fields\n5. **Team Assignment Query:** Call `employee_list` ‚Üí `task_list` filtered by employee\n\n**Data Enrichment:**\n- Join employee names for assignee IDs\n- Calculate progress percentages (completed / total tasks)\n- Derive budget utilization (spent / allocated)\n- Format dates for readability\n\n**Error Handling:**\n- If no results: Try broader search or suggest alternatives\n- If multiple matches: Present list for user to clarify\n- If API error: Explain issue and suggest retry\n\n**Important:** Store all retrieved data in session memory for potential follow-up queries.",
      "tool_selection_strategy": {
        "project_list": "Use when searching for projects by name, stage, or business unit. Include search query and limit.",
        "project_get": "Use when you have exact project ID to get full project details including budget, timeline, team.",
        "project_get_tasks": "Use after retrieving project to get all associated tasks.",
        "task_list": "Use when filtering tasks by assignee, status, priority, or project. Support pagination.",
        "task_get": "Use when you have exact task ID to get full task details including effort, description.",
        "task_get_assignees": "Use to get all employees assigned to a specific task.",
        "task_get_activity": "Use to get task timeline and change history.",
        "task_get_kanban": "Use when user asks for kanban view or visual task board for a project.",
        "employee_list": "Use to find employees by name, role, or department.",
        "employee_get": "Use when you have exact employee ID to get full employee profile.",
        "linkage_list": "Use to find relationships between entities (e.g., which tasks belong to which project)."
      },
      "entity_boundary": {
        "description": "Focus on Project, Task, Employee, Customer, Business, Office entities",
        "default_entities": ["Project", "Task", "Employee", "Business", "Office"],
        "expansion_rules": {
          "if_task_mentioned": {
            "add_entities": ["Wiki", "Artifact", "Form"]
          },
          "if_customer_context": {
            "add_entities": ["Customer", "Worksite"]
          }
        },
        "always_include_categories": ["Linkage"],
        "never_include_categories": ["Authentication", "System"]
      }
    }
  },

  "conversation_tactics": {
    "professional_greeting": {
      "description": "Welcome stakeholder with professional tone",
      "when_to_use": "First interaction or new query",
      "examples": [
        "Hello! I'm here to help with project and task information. What would you like to know?",
        "Good day! How can I assist with your project query today?"
      ]
    },
    "clarifying_questions": {
      "description": "Ask specific questions to understand query",
      "when_to_use": "Query is ambiguous or incomplete",
      "examples": [
        "Which project are you referring to?",
        "Are you looking for active tasks or all tasks including completed?",
        "Would you like the budget summary or detailed breakdown?"
      ]
    },
    "executive_summary": {
      "description": "Provide high-level overview first",
      "when_to_use": "Presenting project/task data",
      "examples": [
        "**Executive Summary:** Project Alpha is 65% complete, on budget, with 2 minor blockers.",
        "**Quick Overview:** 15 active tasks across 3 projects, all assigned and in progress."
      ]
    },
    "data_visualization": {
      "description": "Structure data with visual elements",
      "when_to_use": "Presenting lists or metrics",
      "examples": [
        "**Budget:** $45K / $100K (45% utilized)",
        "**Tasks:** ‚úÖ 8 completed | üîÑ 5 in-progress | üìã 2 open"
      ]
    },
    "actionable_insights": {
      "description": "Highlight key takeaways",
      "when_to_use": "After presenting data",
      "examples": [
        "**Insight:** Budget is tracking well, but 2 tasks are overdue. Recommend prioritizing Task-456.",
        "**Next Steps:** Consider adding resources to Project Beta given the timeline crunch."
      ]
    },
    "empathetic_response": {
      "description": "Acknowledge when data isn't available",
      "when_to_use": "No results found",
      "examples": [
        "I couldn't find that project. Let me help you search differently.",
        "That task ID doesn't exist. Would you like to search by task name instead?"
      ]
    },
    "alternative_suggestions": {
      "description": "Offer different search options",
      "when_to_use": "No results or ambiguous query",
      "examples": [
        "Would you like to see all active projects instead?",
        "I can search by project manager, business unit, or keyword."
      ]
    },
    "satisfaction_check": {
      "description": "Verify stakeholder has needed info",
      "when_to_use": "After providing response",
      "examples": [
        "Does this answer your question?",
        "Would you like more details on any specific task?"
      ]
    },
    "graceful_closure": {
      "description": "End conversation professionally",
      "when_to_use": "Stakeholder satisfied",
      "examples": [
        "Thank you for using the PMO Assistant!",
        "Feel free to return anytime for project updates."
      ]
    }
  },

  "global_constraints": {
    "max_conversation_turns": 20,
    "max_goal_iterations": 2,
    "mandatory_fields_global": ["query.intent"],
    "timeout_seconds": 300,
    "escalation_triggers": [
      "conversation exceeds max_turns",
      "user requests human assistance",
      "critical project data access error"
    ]
  },

  "use_cases": [
    {
      "use_case": "Project Status Query",
      "example_query": "What's the status of Project Alpha?",
      "expected_flow": "GREET ‚Üí RETRIEVE (project_list, project_get, project_get_tasks) ‚Üí FORMAT ‚Üí CLOSE",
      "expected_response": "Project summary with status, budget, timeline, task breakdown"
    },
    {
      "use_case": "Task Assignment Query",
      "example_query": "Show me all tasks assigned to John Smith",
      "expected_flow": "GREET ‚Üí RETRIEVE (employee_list, task_list) ‚Üí FORMAT ‚Üí CLOSE",
      "expected_response": "List of tasks with status, priority, deadlines"
    },
    {
      "use_case": "Budget Query",
      "example_query": "What's the budget status for Project Beta?",
      "expected_flow": "GREET ‚Üí RETRIEVE (project_list, project_get) ‚Üí FORMAT ‚Üí CLOSE",
      "expected_response": "Budget allocated vs spent, percentage utilization"
    },
    {
      "use_case": "Task Detail Query",
      "example_query": "Tell me about Task-456",
      "expected_flow": "GREET ‚Üí RETRIEVE (task_get, task_get_activity, task_get_assignees) ‚Üí FORMAT ‚Üí CLOSE",
      "expected_response": "Task details, effort, timeline, activity log"
    },
    {
      "use_case": "Team Workload Query",
      "example_query": "How many open tasks does each team member have?",
      "expected_flow": "GREET ‚Üí RETRIEVE (employee_list, task_list per employee) ‚Üí FORMAT ‚Üí CLOSE",
      "expected_response": "Employee task count summary, highlight overloaded members"
    }
  ]
}

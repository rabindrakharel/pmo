# ============================================================================
# Huron PMO Platform - Terraform Variables (Example Template)
# Domain: cohuron.com
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file to terraform.tfvars:
#    cp terraform.tfvars.example terraform.tfvars
# 2. Update the REQUIRED values marked with "CHANGE_ME"
# 3. Review and customize optional values
# 4. NEVER commit terraform.tfvars to version control (contains secrets)
# ============================================================================

# ============================================================================
# AWS Configuration
# ============================================================================

# AWS CLI profile name (must be configured with 'aws configure --profile cohuron')
aws_profile = "cohuron"

# AWS region for deployment
aws_region = "us-east-1"

# Environment name (dev, staging, prod)
environment = "prod"

# ============================================================================
# Project Configuration
# ============================================================================

# Project name (used for resource naming)
project_name = "pmo"

# Your domain name
domain_name = "cohuron.com"

# Application subdomain (creates app.cohuron.com)
app_subdomain = "app"

# GitHub repository URL for automatic code deployment (optional)
# Leave empty "" if deploying code manually
github_repo_url = ""

# Create Route 53 DNS records (set to false if managing DNS externally)
create_dns_records = true

# ============================================================================
# Security Configuration (REQUIRED - MUST UPDATE THESE)
# ============================================================================

# SSH public key for EC2 access
# Generate with: ssh-keygen -t rsa -b 4096 -f ~/.ssh/pmo-key -C "pmo@cohuron.com"
# Then paste the contents of ~/.ssh/pmo-key.pub here
ec2_public_key = "CHANGE_ME_ssh-rsa_AAAAB3NzaC1yc2EAAAADAQABAAACAQD..."

# Database master password (REQUIRED - minimum 8 characters)
# Generate strong password with: openssl rand -base64 32
db_password = "CHANGE_ME_STRONG_PASSWORD_HERE"

# CIDR blocks allowed to SSH into EC2 instance
# SECURITY WARNING: Change from 0.0.0.0/0 to your specific IP in production!
# Find your IP: curl ifconfig.me
# Format: ["YOUR_IP/32"]
ssh_allowed_cidr = ["0.0.0.0/0"]  # ⚠️ INSECURE - CHANGE IN PRODUCTION

# ============================================================================
# Network Configuration (Optional - defaults work for most deployments)
# ============================================================================

# VPC CIDR block
vpc_cidr = "10.0.0.0/16"

# Availability zones (leave empty [] to auto-select)
availability_zones = []

# Public subnet CIDR blocks (for app servers)
public_subnet_cidrs = ["10.0.1.0/24", "10.0.2.0/24"]

# Private subnet CIDR blocks (for databases)
private_subnet_cidrs = ["10.0.11.0/24", "10.0.12.0/24"]

# ============================================================================
# Database Configuration (Optional)
# ============================================================================

# Database name
db_name = "coherent"

# Database username
db_username = "coherent_admin"

# RDS instance type
# Free tier: db.t3.micro (1 vCPU, 1 GB RAM)
# Production: db.t3.small (2 vCPU, 2 GB RAM) or larger
db_instance_class = "db.t3.micro"

# PostgreSQL version
db_engine_version = "14.10"

# Initial storage in GB
db_allocated_storage = 20

# Maximum storage for autoscaling in GB
db_max_allocated_storage = 100

# Backup retention in days
db_backup_retention_period = 7

# ============================================================================
# EC2 Configuration (Optional)
# ============================================================================

# EC2 instance type
# Development: t3.medium (2 vCPU, 4 GB RAM) - ~$30/month
# Production: t3.large (2 vCPU, 8 GB RAM) - ~$60/month
ec2_instance_type = "t3.medium"

# Root volume size in GB
ec2_root_volume_size = 30

# ============================================================================
# SES (Email Service) Configuration (Optional)
# ============================================================================

# List of email addresses to verify for testing (useful in sandbox mode)
# In sandbox mode, you can only send TO verified emails
# Once you have production access, you can remove this
ses_verified_emails = [
  # "test@example.com",
  # "admin@cohuron.com"
]

# ============================================================================
# SNS (SMS Service) Configuration (Optional)
# ============================================================================

# Monthly spending limit for SMS in USD
# Helps prevent unexpected charges
# Example: $10 = ~1,550 SMS messages in US
sns_monthly_spend_limit = "10.00"

# Default sender ID (alphanumeric name shown to recipients)
# NOTE: Not supported in US, Canada, and some other regions
# Leave empty "" for unsupported regions
sns_default_sender_id = ""

# SMS type: "Transactional" (time-sensitive) or "Promotional" (marketing)
# Transactional has higher priority and better delivery rates
sns_default_sms_type = "Transactional"

# Percentage of successful SMS deliveries to log (0-100)
# 100 = log all successful deliveries (useful for debugging)
# Lower values reduce CloudWatch costs for high-volume SMS
sns_delivery_sampling_rate = "100"

# S3 bucket for SMS usage reports (optional)
# Leave empty "" to disable usage reports
# If specified, must be an existing S3 bucket name
sns_usage_report_bucket = ""

# CloudWatch log retention for SMS delivery logs (in days)
# Options: 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, 3653
sns_log_retention_days = 30

# Email address to receive SNS delivery notifications (optional)
# Leave empty "" to disable email notifications
# Useful for monitoring SMS delivery failures
sns_notification_email = ""

# ============================================================================
# Secrets Manager Configuration (REQUIRED for production)
# ============================================================================
# These secrets will be stored in AWS Secrets Manager for secure access
# The EC2 instance will have IAM permissions to read these secrets at runtime

# Database secrets
secrets_db_host     = "localhost"
secrets_db_port     = 5434
secrets_db_name     = "app"
secrets_db_user     = "app"
secrets_db_password = "CHANGE_ME_STRONG_DB_PASSWORD"  # Generate: openssl rand -base64 32

# JWT/Auth secrets
secrets_jwt_secret     = "CHANGE_ME_STRONG_JWT_SECRET"  # Generate: openssl rand -base64 64
secrets_jwt_expires_in = "24h"

# OAuth secrets (optional - leave empty if not using)
secrets_google_client_id        = ""
secrets_google_client_secret    = ""
secrets_microsoft_client_id     = ""
secrets_microsoft_client_secret = ""
secrets_github_client_id        = ""
secrets_github_client_secret    = ""

# API keys (optional - leave empty if not using)
secrets_openai_api_key      = ""
secrets_deepgram_api_key    = ""
secrets_eleven_labs_api_key = ""

# Redis secrets (optional)
secrets_redis_host     = "localhost"
secrets_redis_port     = 6379
secrets_redis_password = ""

# RabbitMQ secrets (optional)
secrets_rabbitmq_url = ""

# ============================================================================
# Resource Tagging (Optional)
# ============================================================================

global_tags = {
  Project   = "Coherent"
  ManagedBy = "Terraform"
  Owner     = "Huron Home Services"
}

# ============================================================================
# COST ESTIMATE (us-east-1, as of 2024)
# ============================================================================
# EC2 t3.medium:        ~$30/month
# RDS db.t3.micro:      ~$15/month
# EBS Storage (30 GB):  ~$3/month
# Data Transfer:        ~$5-10/month
# S3 Storage:           ~$1-5/month
# Route 53 Hosted Zone: ~$0.50/month
# SES Emails:           ~$0.10 per 1,000 emails (62K free/month from EC2)
# SNS SMS:              ~$0.00645 per SMS (varies by country)
# ----------------------------------------
# TOTAL (without SES/SNS): ~$55-65/month
# With SES/SNS (moderate use): ~$60-75/month
# ============================================================================
